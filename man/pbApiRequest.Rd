% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/apiRequest.R
\name{pbApiRequest}
\alias{pbApiRequest}
\title{Fetch Point Count Data from the Point Blue API}
\usage{
pbApiRequest(
  surveyType = "PointCount",
  projects = NULL,
  dateBegin = NULL,
  dateEnd = NULL,
  protocol = NULL,
  species = NULL,
  region = NULL
)
}
\arguments{
\item{surveyType}{The survey type to request (defaults to \code{"PointCount"}).}

\item{projects}{Optional character vector of project codes to query (e.g. \code{"ADOB"}).
Multiple codes may be supplied either as a vector or comma-separated string.
If \code{NULL}, all accessible project data are fetched.}

\item{dateBegin}{Optional ISO date string for the beginning of the date range.}

\item{dateEnd}{Optional ISO date string for the end of the date range.}

\item{protocol}{Optional single protocol name or comma-separated protocols (vectors are
collapsed for convenience). When supplied, restricts results to those protocols.}

\item{species}{Optional single species code or comma-separated species codes. When supplied,
limits results to the provided species.}

\item{region}{Optional single region filter in the form
\code{REGION_DOMAIN_ID:REGION_ID} (e.g. \code{"US_STATES:06"}). Supply
multiple regions either as a character vector or comma-separated string,
provided all entries share the same region domain. When supplied, restricts
results to the provided regions.}
}
\value{
A tibble containing point count survey records.
}
\description{
Retrieves point count survey data from the Point Blue data warehouse API
for one or more projects and returns the results as a data frame.
}
\details{
The function requires a valid API token to be set in the environment
variable \code{PB_API_KEY}.


The query uses the supplied \code{surveyType}. Optionally, specify
\code{dateBegin} and/or \code{dateEnd} to filter results by date, and/or
supply \code{protocol} to limit results to one or more protocols,
\code{species} to restrict the output to particular species codes, and
\code{region} (formatted as \code{REGION_DOMAIN_ID:REGION_ID}) to constrain
the sampling units returned. When multiple regions are supplied they must all
belong to the same region domain because the API accepts a single
\code{regionDomainId} per request.
}
\examples{
\dontrun{
Sys.setenv(PB_API_KEY = "your_api_key_here")
df <- pbApiRequest(
  surveyType = "PointCount",
  projects = c("ADOB", "ABC"),
  dateBegin = "2001-01-01",
  dateEnd = "2020-12-31",
  protocol = "ProtocolA,ProtocolB",
  species = "ATOW",
  region = "US_STATES:06"
)
}

}
